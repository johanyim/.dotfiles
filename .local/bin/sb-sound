#!/bin/sh

# Prints the current volume or ðŸ”‡ if muted.

case $BLOCK_BUTTON in
    1) amixer -q sset Master toggle ;;
	4) amixer -q sset Master 1%+;;
	5) amixer -q sset Master 1%- ;;
    6) amixer -q sset Capture toggle ;;
	9) amixer -q sset Capture 1%+;;
	10) amixer -q sset Capture 1%- ;;
esac

# speakers
output_muted="$(amixer sget Master | awk -F"[][]" '/Mono:/ { print $6 }')"

if [ "$output_muted" = "off" ] ; then 
    output_icon="ó°¸ˆ " 
    output_volume="Muted"
else     
    output_volume="$(amixer sget Master | awk -F"[][]" '/Mono:/ { print $2 }' )"

    case 1 in
	    $(( ${output_volume%\%} >= 70)) ) output_icon="ó°•¾ " ;;
	    $(( ${output_volume%\%} >= 30)) ) output_icon="ó°–€ " ;;
	    $(( ${output_volume%\%} >= 1)) ) output_icon="ó°•¿ " ;;
	    * ) output_icon="ó°¸ˆ " ;;
    esac
fi

# microphone
input_muted="$(amixer sget Capture | awk -F"[][]" '/Right: / { print $6 }')"

if [ "$input_muted" = "off" ] ; then 
    input_icon="ï„± " 
    input_volume="Muted"
else     
    input_icon="ï„° "  
    input_volume="$(amixer sget Capture | awk -F"[][]" '/Right: / { print $2 }')"
fi

echo "$output_icon$output_volume $input_icon$input_volume"

